{"links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/106/comments/103451.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/106/_/diff#comment-103451"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 106, "links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/106.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/106"}}, "title": "Allow udp or tcp for publishing joint commands (so we can use python)"}, "content": {"raw": "see issue #111 for details\n\nBased on the data from #111, we should enable tcpNoDelay option if reliable connection is needed and achieve near udp performance.\n\n~~~\ndiff -r 9d2a424ed5cf ros/atlas_msgs/AtlasPlugin.cpp\n--- a/ros/atlas_msgs/AtlasPlugin.cpp\tThu Jan 31 17:33:12 2013 -0800\n+++ b/ros/atlas_msgs/AtlasPlugin.cpp\tThu Jan 31 19:16:27 2013 -0800\n@@ -395,7 +395,8 @@\n   // Note that we'll still accept TCP connections for this topic\n   // (e.g., from rospy nodes, which don't support UDP);\n   // we just prefer UDP.\n-  jointCommandsSo.transport_hints = ros::TransportHints().unreliable().reliable();\n+  jointCommandsSo.transport_hints =\n+    ros::TransportHints().unreliable().reliable().tcpNoDelay(true);\n \n   this->subJointCommands=\n     this->rosNode->subscribe(jointCommandsSo);\n~~~", "markup": "markdown", "html": "<p>see issue <a href=\"#!/osrf/drcsim/issues/111/tcp-udp-or-tcpnodelay\" rel=\"nofollow\" title=\"tcp, udp, or tcpNoDelay\" class=\"ap-connect-link\"><s>#111</s></a> for details</p>\n<p>Based on the data from <a href=\"#!/osrf/drcsim/issues/111/tcp-udp-or-tcpnodelay\" rel=\"nofollow\" title=\"tcp, udp, or tcpNoDelay\" class=\"ap-connect-link\"><s>#111</s></a>, we should enable tcpNoDelay option if reliable connection is needed and achieve near udp performance.</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 9d2a424ed5cf ros/atlas_msgs/AtlasPlugin.cpp</span>\n<span class=\"gd\">--- a/ros/atlas_msgs/AtlasPlugin.cpp    Thu Jan 31 17:33:12 2013 -0800</span>\n<span class=\"gi\">+++ b/ros/atlas_msgs/AtlasPlugin.cpp    Thu Jan 31 19:16:27 2013 -0800</span>\n<span class=\"gu\">@@ -395,7 +395,8 @@</span>\n   // Note that we&#39;ll still accept TCP connections for this topic\n   // (e.g., from rospy nodes, which don&#39;t support UDP);\n   // we just prefer UDP.\n<span class=\"gd\">-  jointCommandsSo.transport_hints = ros::TransportHints().unreliable().reliable();</span>\n<span class=\"gi\">+  jointCommandsSo.transport_hints =</span>\n<span class=\"gi\">+    ros::TransportHints().unreliable().reliable().tcpNoDelay(true);</span>\n\n   this-&gt;subJointCommands=\n     this-&gt;rosNode-&gt;subscribe(jointCommandsSo);\n</pre></div>", "type": "rendered"}, "created_on": "2013-02-01T01:57:25.203523+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": "2013-02-01T03:17:04.380178+00:00", "type": "pullrequest_comment", "id": 103451}