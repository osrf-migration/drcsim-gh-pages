{"links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/417/comments/933149.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/417/_/diff#comment-933149"}}, "parent": {"id": 926828, "links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/417/comments/926828.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/417/_/diff#comment-926828"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 417, "links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/417.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/417"}}, "title": "Add fake behavior support (#385)"}, "content": {"raw": "Interrupting walk (`i`) with stand (`k`) causes actionlib_server to go into [this block](#!/osrf/drcsim/src/15e6d626b786dffe7533d4f9fde73f30c5761b09/drcsim_gazebo_ros_plugins/src/actionlib_server.cpp?at=default#cl-171) immediately as can be seen by `ROS_INFO` in console. Even though `this->atlasCommandPublisher.publish(command);` is called with `command.behavior` set to `STAND`, command-line echo of ros topic does not reflect the publish call right-away, i.e.\n\n~~~\nrostopic echo /atlas/fake/atlas_sim_interface_command | grep behavior\n~~~\nshows\n~~~\nbehavior: 4\n~~~\nfor a few seconds after pressing `k` while the robot drifts, before finally\n~~~\nbehavior: 0\n~~~\nis successfully published and robot stops.  Patch in pull request #429.", "markup": "markdown", "html": "<p>Interrupting walk (<code>i</code>) with stand (<code>k</code>) causes actionlib_server to go into <a data-is-external-link=\"true\" href=\"#!/osrf/drcsim/src/15e6d626b786dffe7533d4f9fde73f30c5761b09/drcsim_gazebo_ros_plugins/src/actionlib_server.cpp?at=default#cl-171\" rel=\"nofollow\">this block</a> immediately as can be seen by <code>ROS_INFO</code> in console. Even though <code>this-&gt;atlasCommandPublisher.publish(command);</code> is called with <code>command.behavior</code> set to <code>STAND</code>, command-line echo of ros topic does not reflect the publish call right-away, i.e.</p>\n<div class=\"codehilite\"><pre><span></span>rostopic echo /atlas/fake/atlas_sim_interface_command | grep behavior\n</pre></div>\n\n\n<p>shows</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">behavior</span><span class=\"o\">:</span> <span class=\"mi\">4</span>\n</pre></div>\n\n\n<p>for a few seconds after pressing <code>k</code> while the robot drifts, before finally</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">behavior</span><span class=\"o\">:</span> <span class=\"mi\">0</span>\n</pre></div>\n\n\n<p>is successfully published and robot stops.  Patch in <a href=\"#!/osrf/drcsim/pull-requests/429/fix-drift-by-updating-activegoal-in\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #429</a>.</p>", "type": "rendered"}, "created_on": "2013-12-11T01:01:58.444724+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": "2013-12-11T01:22:06.058137+00:00", "type": "pullrequest_comment", "id": 933149}