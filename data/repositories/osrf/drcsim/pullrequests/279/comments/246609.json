{"links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/279/comments/246609.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/279/_/diff#comment-246609"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 279, "links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/279.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/279"}}, "title": "issue #194, increase upper limit of joint damping coefficient settings.  pass through kp_velocity to implicit joint damping."}, "content": {"raw": "If you are going to \"approximate the inherent damping in the robot\", then you need to provide torque sensing at each joint in Gazebo so it can be cancelled using joint torque control. See this video of an implementation of joint torque control on an almost identical hydraulic humanoid robot.\nhttp://www.youtube.com/watch?v=Ac5cowTwOPw\n\nCFM damping isn't about modeling the robot. CFM damping is a tool to help Gazebo approximate real world control of a real hydraulic robot, by getting around the problems of noisy position and damping signals in Gazebo (and not in the real world).\nOriginally NIST was supposed to certify that the Gazebo simulation matched reality. It is clear that the Gazebo simulation has a special kind of noise that is an artifact of ODE style simulators. If you want to make Gazebo match reality, the damping problem needs to be fixed using the best tools we have.\n\nSo I suggest removing the limit on the number of changes, and supporting tick-by-tick CFM damping modulation as part of PID control.\n\nI don't know what to do about the torque limit issue. A better solution might be to reduce the user set CFM damping based on the actual velocity at that tick, so that the product (plus other torque terms) did not exceed the torque maximum.", "markup": "markdown", "html": "<p>If you are going to \"approximate the inherent damping in the robot\", then you need to provide torque sensing at each joint in Gazebo so it can be cancelled using joint torque control. See this video of an implementation of joint torque control on an almost identical hydraulic humanoid robot.\n<a href=\"http://www.youtube.com/watch?v=Ac5cowTwOPw\" rel=\"nofollow\" class=\"ap-connect-link\">http://www.youtube.com/watch?v=Ac5cowTwOPw</a></p>\n<p>CFM damping isn't about modeling the robot. CFM damping is a tool to help Gazebo approximate real world control of a real hydraulic robot, by getting around the problems of noisy position and damping signals in Gazebo (and not in the real world).\nOriginally NIST was supposed to certify that the Gazebo simulation matched reality. It is clear that the Gazebo simulation has a special kind of noise that is an artifact of ODE style simulators. If you want to make Gazebo match reality, the damping problem needs to be fixed using the best tools we have.</p>\n<p>So I suggest removing the limit on the number of changes, and supporting tick-by-tick CFM damping modulation as part of PID control.</p>\n<p>I don't know what to do about the torque limit issue. A better solution might be to reduce the user set CFM damping based on the actual velocity at that tick, so that the product (plus other torque terms) did not exceed the torque maximum.</p>", "type": "rendered"}, "created_on": "2013-05-11T13:05:35.291639+00:00", "user": {"display_name": "Chris Atkeson", "uuid": "{3bdaa162-b747-4fa9-9d6e-a2d5c92933c6}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3bdaa162-b747-4fa9-9d6e-a2d5c92933c6%7D"}, "html": {"href": "https://bitbucket.org/%7B3bdaa162-b747-4fa9-9d6e-a2d5c92933c6%7D/"}, "avatar": {"href": "https://bitbucket.org/account/catkeson/avatar/"}}, "nickname": "catkeson", "type": "user", "account_id": null}, "updated_on": "2013-05-11T13:05:35.409691+00:00", "type": "pullrequest_comment", "id": 246609}