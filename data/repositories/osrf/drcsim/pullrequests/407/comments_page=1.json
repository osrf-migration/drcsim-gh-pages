{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/407/comments/701703.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/407/_/diff#comment-701703"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 407, "links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/407.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/407"}}, "title": "Cleaned up drcsim/setup.sh."}, "content": {"raw": "works for me, if Jose approves of the symlinks, it's good for me too.", "markup": "markdown", "html": "<p>works for me, if Jose approves of the symlinks, it's good for me too.</p>", "type": "rendered"}, "created_on": "2013-10-18T21:50:40.949374+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": "2013-10-18T21:50:40.963137+00:00", "type": "pullrequest_comment", "id": 701703}, {"links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/407/comments/706322.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/407/_/diff#comment-706322"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 407, "links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/407.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/407"}}, "title": "Cleaned up drcsim/setup.sh."}, "content": {"raw": "I'm afraid that it won't work. ```dpkg-buildpackage``` will run install command using a dh_auto_install with a ```--destdir``` (pointing to debian/drcsim) so the path using ```CMAKE_INSTALL_PREFIX``` it is not enough. You could modify to include```ENV${DESTDIR}``` before ```CMAKE_INSTALL_PREFIX``` ... but that also won't work since cmake will expand variables during the phase previous to compilation and instalation when you know nothing about the ```DESTDIR``.\n\nI'm still looking for a proper solution. As a workaround we can generate the symlinks in debian/rules. It is not very nice, but will work.", "markup": "markdown", "html": "<p>I'm afraid that it won't work. <code>dpkg-buildpackage</code> will run install command using a dh_auto_install with a <code>--destdir</code> (pointing to debian/drcsim) so the path using <code>CMAKE_INSTALL_PREFIX</code> it is not enough. You could modify to include<code>ENV${DESTDIR}</code> before <code>CMAKE_INSTALL_PREFIX</code> ... but that also won't work since cmake will expand variables during the phase previous to compilation and instalation when you know nothing about the <code>`DESTDIR</code>.</p>\n<p>I'm still looking for a proper solution. As a workaround we can generate the symlinks in debian/rules. It is not very nice, but will work.</p>", "type": "rendered"}, "created_on": "2013-10-21T14:03:56.350844+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2013-10-21T14:03:56.360104+00:00", "type": "pullrequest_comment", "id": 706322}, {"links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/407/comments/720496.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/407/_/diff#comment-720496"}}, "parent": {"id": 706322, "links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/407/comments/706322.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/407/_/diff#comment-706322"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 407, "links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/407.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/407"}}, "title": "Cleaned up drcsim/setup.sh."}, "content": {"raw": "The symlinks are created with relative target paths:\n\n    COMMAND ${CMAKE_COMMAND} -E create_symlink ../../../${pm} ${pm}\n\nI would expect that to work in the debs, in the same way that it does for links to versioned shared libs.", "markup": "markdown", "html": "<p>The symlinks are created with relative target paths:</p>\n<div class=\"codehilite\"><pre><span></span>COMMAND <span class=\"cp\">${</span><span class=\"n\">CMAKE_COMMAND</span><span class=\"cp\">}</span> -E create_symlink ../../../<span class=\"cp\">${</span><span class=\"n\">pm</span><span class=\"cp\">}</span> <span class=\"cp\">${</span><span class=\"n\">pm</span><span class=\"cp\">}</span>\n</pre></div>\n\n\n<p>I would expect that to work in the debs, in the same way that it does for links to versioned shared libs.</p>", "type": "rendered"}, "created_on": "2013-10-23T22:24:45.524757+00:00", "user": {"display_name": "Brian Gerkey", "uuid": "{3d8b5763-9dad-4be7-85c2-a7ab6cd49173}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D"}, "html": {"href": "https://bitbucket.org/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9/5fa9ec73-0fec-4860-a202-e34ae23b6a12/128"}}, "nickname": "Brian Gerkey", "type": "user", "account_id": "557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9"}, "updated_on": "2013-10-23T22:24:45.537491+00:00", "type": "pullrequest_comment", "id": 720496}, {"links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/407/comments/723067.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/407/_/diff#comment-723067"}}, "parent": {"id": 720496, "links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/407/comments/720496.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/407/_/diff#comment-720496"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 407, "links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/407.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/407"}}, "title": "Cleaned up drcsim/setup.sh."}, "content": {"raw": "The problem is not really in relative path of the symlink but where to run it from.\n\nAFAIK, it will run using the path ```WORKING_DIRECTORY ${CMAKE_INSTALL_PREFIX}/share/${PROJECT_NAME}/gazebo_models/environments/)``` which doesn't know about DESTDIR.", "markup": "markdown", "html": "<p>The problem is not really in relative path of the symlink but where to run it from.</p>\n<p>AFAIK, it will run using the path <code>WORKING_DIRECTORY ${CMAKE_INSTALL_PREFIX}/share/${PROJECT_NAME}/gazebo_models/environments/)</code> which doesn't know about DESTDIR.</p>", "type": "rendered"}, "created_on": "2013-10-24T11:13:14.913143+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2013-10-24T11:13:14.922771+00:00", "type": "pullrequest_comment", "id": 723067}, {"links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/407/comments/746263.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/407/_/diff#comment-746263"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 407, "links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/407.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/407"}}, "title": "Cleaned up drcsim/setup.sh."}, "content": {"raw": "I can not see a silver bullet to solve this problem of installing using a different ```DESTDIR```.\n\nCurrent solution will work for catkin workspaces and installations using just ```CMAKE_INSTALL_PREFIX```, which should cover 95% of 'from source' installations.\n\nWith respect to drcsim packages I can merge [this commit](#!/osrf/drcsim-release/commits/7c811d7ba2d7b0e154da899341f1d35baa6e39e0) to implement the same effect.\n\nSince it is not critical for the package, my vote is for this last fix in packaging and close the pull request.", "markup": "markdown", "html": "<p>I can not see a silver bullet to solve this problem of installing using a different <code>DESTDIR</code>.</p>\n<p>Current solution will work for catkin workspaces and installations using just <code>CMAKE_INSTALL_PREFIX</code>, which should cover 95% of 'from source' installations.</p>\n<p>With respect to drcsim packages I can merge <a data-is-external-link=\"true\" href=\"#!/osrf/drcsim-release/commits/7c811d7ba2d7b0e154da899341f1d35baa6e39e0\" rel=\"nofollow\">this commit</a> to implement the same effect.</p>\n<p>Since it is not critical for the package, my vote is for this last fix in packaging and close the pull request.</p>", "type": "rendered"}, "created_on": "2013-10-30T00:50:32.439740+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2013-10-30T00:51:23.628097+00:00", "type": "pullrequest_comment", "id": 746263}], "page": 1, "size": 5}