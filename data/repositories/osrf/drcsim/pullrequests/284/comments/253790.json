{"links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/284/comments/253790.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/284/_/diff#comment-253790"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 284, "links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/284.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/284"}}, "title": "fix startup race condition"}, "content": {"raw": "I tried to automatize the testing on this, but seems like scoring plugin is not aware of the failure at starting (probably not yes active to register the acceleration), so I wasn't able to check if robot is laying on the floor. Maybe using the gztopics or rostopics? \n\nI was able to see it falling under stressing CPU conditions (apt-get install stress && stress --cpu 2) in my local machine for VRC world 1. But maybe the CPU load was too high to keep it working (RTF around ~0.10).\n\nManual version of generating testing runs (10 runs, on three world, on both qual/vrc):\n```\n#!bash\n\nfor run_number in {1..10}; do\n  for world_to_run in {1..3}; do\n      for type in \"qual\" \"vrc\"; do\n        echo \"Running $world_to_run num $run_number\"\n        roslaunch atlas_utils \"${type}_task_${world_to_run}.launch\" &\n        sleep 60\n        killall -INT roslaunch\n        sleep 20\n      done\n  done\ndone\n```", "markup": "markdown", "html": "<p>I tried to automatize the testing on this, but seems like scoring plugin is not aware of the failure at starting (probably not yes active to register the acceleration), so I wasn't able to check if robot is laying on the floor. Maybe using the gztopics or rostopics? </p>\n<p>I was able to see it falling under stressing CPU conditions (apt-get install stress &amp;&amp; stress --cpu 2) in my local machine for VRC world 1. But maybe the CPU load was too high to keep it working (RTF around ~0.10).</p>\n<p>Manual version of generating testing runs (10 runs, on three world, on both qual/vrc):</p>\n<div class=\"codehilite language-bash\"><pre><span></span><span class=\"k\">for</span> run_number in <span class=\"o\">{</span><span class=\"m\">1</span>..10<span class=\"o\">}</span><span class=\"p\">;</span> <span class=\"k\">do</span>\n  <span class=\"k\">for</span> world_to_run in <span class=\"o\">{</span><span class=\"m\">1</span>..3<span class=\"o\">}</span><span class=\"p\">;</span> <span class=\"k\">do</span>\n      <span class=\"k\">for</span> <span class=\"nb\">type</span> in <span class=\"s2\">&quot;qual&quot;</span> <span class=\"s2\">&quot;vrc&quot;</span><span class=\"p\">;</span> <span class=\"k\">do</span>\n        <span class=\"nb\">echo</span> <span class=\"s2\">&quot;Running </span><span class=\"nv\">$world_to_run</span><span class=\"s2\"> num </span><span class=\"nv\">$run_number</span><span class=\"s2\">&quot;</span>\n        roslaunch atlas_utils <span class=\"s2\">&quot;</span><span class=\"si\">${</span><span class=\"nv\">type</span><span class=\"si\">}</span><span class=\"s2\">_task_</span><span class=\"si\">${</span><span class=\"nv\">world_to_run</span><span class=\"si\">}</span><span class=\"s2\">.launch&quot;</span> <span class=\"p\">&amp;</span>\n        sleep <span class=\"m\">60</span>\n        killall -INT roslaunch\n        sleep <span class=\"m\">20</span>\n      <span class=\"k\">done</span>\n  <span class=\"k\">done</span>\n<span class=\"k\">done</span>\n</pre></div>", "type": "rendered"}, "created_on": "2013-05-15T17:15:29.030319+00:00", "user": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "updated_on": "2013-05-15T17:15:29.042583+00:00", "type": "pullrequest_comment", "id": 253790}