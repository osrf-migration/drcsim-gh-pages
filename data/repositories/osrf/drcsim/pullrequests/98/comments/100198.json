{"links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/98/comments/100198.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/drcsim/diff/osrf/drcsim:655e0bedd7ee..adc678eef2de?path=ros%2Fatlas_msgs%2FAtlasPlugin.cpp"}, "html": {"href": "#!/osrf/drcsim/pull-requests/98/_/diff#comment-100198"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 98, "links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/98.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/98"}}, "title": "controller api timing test"}, "content": {"raw": "I don't think that `sizeof()` will give you the right number of bytes to copy.  You'd need something like `sizeof(_msg->position[0])*_msg->position.size())`.  Also, I believe that the right way to `memcpy()` into a vector is to give the destination as `&this->jointCommands.position[0]`.\n\nBut it seems like `std::copy()` is the [modern C++ way](http://www.cplusplus.com/reference/algorithm/copy/) of doing this.  It would look something like:\n\n    std::copy(_msg->position.begin(), _msg->position.end(), this->jointCommands.position.begin());\n", "markup": "markdown", "html": "<p>I don't think that <code>sizeof()</code> will give you the right number of bytes to copy.  You'd need something like <code>sizeof(_msg-&gt;position[0])*_msg-&gt;position.size())</code>.  Also, I believe that the right way to <code>memcpy()</code> into a vector is to give the destination as <code>&amp;this-&gt;jointCommands.position[0]</code>.</p>\n<p>But it seems like <code>std::copy()</code> is the <a data-is-external-link=\"true\" href=\"http://www.cplusplus.com/reference/algorithm/copy/\" rel=\"nofollow\">modern C++ way</a> of doing this.  It would look something like:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">std</span><span class=\"p\">::</span><span class=\"nd\">copy</span><span class=\"o\">(</span><span class=\"nt\">_msg-</span><span class=\"o\">&gt;</span><span class=\"nt\">position</span><span class=\"p\">.</span><span class=\"nc\">begin</span><span class=\"o\">(),</span> <span class=\"nt\">_msg-</span><span class=\"o\">&gt;</span><span class=\"nt\">position</span><span class=\"p\">.</span><span class=\"nc\">end</span><span class=\"o\">(),</span> <span class=\"nt\">this-</span><span class=\"o\">&gt;</span><span class=\"nt\">jointCommands</span><span class=\"p\">.</span><span class=\"nc\">position</span><span class=\"p\">.</span><span class=\"nc\">begin</span><span class=\"o\">());</span>\n</pre></div>", "type": "rendered"}, "created_on": "2013-01-29T21:25:01.859549+00:00", "user": {"display_name": "Brian Gerkey", "uuid": "{3d8b5763-9dad-4be7-85c2-a7ab6cd49173}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D"}, "html": {"href": "https://bitbucket.org/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9/5fa9ec73-0fec-4860-a202-e34ae23b6a12/128"}}, "nickname": "Brian Gerkey", "type": "user", "account_id": "557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9"}, "inline": {"to": 210, "from": null, "outdated": true, "path": "ros/atlas_msgs/AtlasPlugin.cpp"}, "updated_on": "2013-01-29T21:25:01.866294+00:00", "type": "pullrequest_comment", "id": 100198}