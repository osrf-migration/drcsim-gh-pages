{"links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/509/comments/4400865.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/509/_/diff#comment-4400865"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 509, "links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/509.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/509"}}, "title": "Final changes to make Atlas v4 & v5 stand and walk"}, "content": {"raw": "~~~\n$ roslaunch drcsim_gazebo atlas_robotiq_hands.launch model_args:=\"_v5\"\n... logging to /home/hsu/.ros/log/2b67a7fc-87f1-11e4-84d7-40e23085b399/roslaunch-lcp2-4977.log\nChecking log directory for disk usage. This may take awhile.\nPress Ctrl-C to interrupt\nDone checking log file disk usage. Usage is <1GB.\n\nroslaunch file contains multiple nodes named [/atlas_robot_state_publisher].\nPlease check all <node> 'name' attributes to make sure they are unique.\nAlso check that $(anon id) use different ids.\nThe traceback for the exception was written to the log file\n~~~\n\nfix with\n\n~~~\n$ hg diff\ndiff -r e8fd4d57e182 drcsim_gazebo/launch/atlas_robotiq_hands.launch\n--- a/drcsim_gazebo/launch/atlas_robotiq_hands.launch   Fri Dec 19 14:38:10 2014 -0800\n+++ b/drcsim_gazebo/launch/atlas_robotiq_hands.launch   Fri Dec 19 18:38:59 2014 -0800\n@@ -31,6 +31,4 @@\n   <param name=\"robot_initial_pose/yaw\"   value=\"0\" type=\"double\"/>\n \n   <include file=\"$(find drcsim_gazebo)/launch/atlas_robotiq_hands_bringup.launch\"/>\n-\n-  <include file=\"$(find drcsim_gazebo)/launch/atlas$(arg model_args)_bringup.launch\"/>\n </launch>\n~~~\n\nBut the robot does a little bit of slow arm swinging left and right on startup,\n\n![atlas_robotiq_hand_v5.png](data/bitbucket.org/repo/bae8oa/images/2655498644-atlas_robotiq_hand_v5.png)\n\nand I got new errors:\n\n~~~\n...\n[ INFO] [1419043178.586742351, 0.055000000]: Bounds for joint[l_arm_wry] is [0.000000, 125.000000], model default is [0.100000]\n[ INFO] [1419043178.586778808, 0.055000000]: Bounds for joint[l_arm_wrx] is [0.000000, 125.000000], model default is [0.100000]\n[ INFO] [1419043178.586810516, 0.055000000]: Bounds for joint[r_arm_shz] is [0.000000, 362.500000], model default is [0.100000]\n[ INFO] [1419043178.586839011, 0.055000000]: Bounds for joint[r_arm_shx] is [0.000000, 412.500000], model default is [0.100000]\n[ INFO] [1419043178.586863106, 0.055000000]: Bounds for joint[r_arm_ely] is [0.000000, 262.500000], model default is [0.100000]\n[ INFO] [1419043178.586890484, 0.055000000]: Bounds for joint[r_arm_elx] is [0.000000, 466.666667], model default is [0.100000]\n[ INFO] [1419043178.586914021, 0.055000000]: Bounds for joint[r_arm_wry] is [0.000000, 125.000000], model default is [0.100000]\n[ INFO] [1419043178.586939513, 0.055000000]: Bounds for joint[r_arm_wrx] is [0.000000, 125.000000], model default is [0.100000]\n[ERROR] [1419043178.589103964, 0.055000000]: couldn't find a param for atlas_controller/gains/back_bkz/\n[ERROR] [1419043178.589643209, 0.055000000]: couldn't find a param for atlas_controller/gains/back_bky/\n[ERROR] [1419043178.590136428, 0.055000000]: couldn't find a param for atlas_controller/gains/back_bkx/\n[ERROR] [1419043178.590658352, 0.055000000]: couldn't find a param for atlas_controller/gains/neck_ry/\n[ERROR] [1419043178.591137045, 0.055000000]: couldn't find a param for atlas_controller/gains/l_leg_hpz/\n[ERROR] [1419043178.591681877, 0.055000000]: couldn't find a param for atlas_controller/gains/l_leg_hpx/\n[ERROR] [1419043178.592181591, 0.055000000]: couldn't find a param for atlas_controller/gains/l_leg_hpy/\n[ERROR] [1419043178.595563722, 0.055000000]: couldn't find a param for atlas_controller/gains/l_leg_aky/\n[ERROR] [1419043178.595984236, 0.055000000]: couldn't find a param for atlas_controller/gains/l_leg_akx/\n[ERROR] [1419043178.596427308, 0.055000000]: couldn't find a param for atlas_controller/gains/r_leg_hpz/\n[ERROR] [1419043178.596959079, 0.055000000]: couldn't find a param for atlas_controller/gains/r_leg_hpx/\n[ERROR] [1419043178.597377359, 0.055000000]: couldn't find a param for atlas_controller/gains/r_leg_hpy/\n[ERROR] [1419043178.599314757, 0.055000000]: couldn't find a param for atlas_controller/gains/r_leg_aky/\n[ERROR] [1419043178.599718579, 0.055000000]: couldn't find a param for atlas_controller/gains/r_leg_akx/\n[ERROR] [1419043178.600111437, 0.055000000]: couldn't find a param for atlas_controller/gains/l_arm_shz/\n[ERROR] [1419043178.606185396, 0.055000000]: couldn't find a param for atlas_controller/gains/l_arm_wry/\n[ERROR] [1419043178.606713744, 0.055000000]: couldn't find a param for atlas_controller/gains/l_arm_wrx/\n[ERROR] [1419043178.607269889, 0.055000000]: couldn't find a param for atlas_controller/gains/r_arm_shz/\n[ERROR] [1419043178.614665170, 0.055000000]: couldn't find a param for atlas_controller/gains/r_arm_wry/\n[ERROR] [1419043178.615228371, 0.055000000]: couldn't find a param for atlas_controller/gains/r_arm_wrx/\n[ INFO] [1419043178.669913401, 0.056000000]: ros param /atlas_version == 1\n[ INFO] [1419043178.672599429, 0.056000000]: spawn success, set pinLink and call initialize controller\n[ INFO] [1419043178.767142803, 0.058000000]: set robot configuration done\n[AtlasSimInterface] [] Unable to find config value man.psi_supply_label\n [AtlasSimInterface] Could not find config entry man.psi_supply_label when looking for object requested by Atlas3.man\n [AtlasSimInterface] [] Unable to find config value man.psi_intake_label\n [AtlasSimInterface] Could not find config entry man.psi_intake_label when looking for object requested by Atlas3.man\n[ INFO] [1419043178.942782529, 0.112000000]: advertised as /joint_states\n\n [ INFO] [1419043184.712644397, 2.059000000]: going into stand prep\n[ INFO] [1419043190.673561771, 4.059000000]: going into Nominal\n[ INFO] [1419043190.987095079, 4.158000000]: going into Dynamic Stand Behavior\n~~~\n\nprobably need to fix `drcsim_gazebo/config/whole_body_trajectory_controller_v5.yaml`?", "markup": "markdown", "html": "<div class=\"codehilite\"><pre><span></span>$ roslaunch drcsim_gazebo atlas_robotiq_hands.launch model_args:<span class=\"o\">=</span><span class=\"s2\">&quot;_v5&quot;</span>\n... logging to /home/hsu/.ros/log/2b67a7fc-87f1-11e4-84d7-40e23085b399/roslaunch-lcp2-4977.log\nChecking log directory <span class=\"k\">for</span> disk usage. This may take awhile.\nPress Ctrl-C to interrupt\nDone checking log file disk usage. Usage is &lt;1GB.\n\nroslaunch file contains multiple nodes named <span class=\"o\">[</span>/atlas_robot_state_publisher<span class=\"o\">]</span>.\nPlease check all &lt;node&gt; <span class=\"s1\">&#39;name&#39;</span> attributes to make sure they are unique.\nAlso check that <span class=\"k\">$(</span>anon id<span class=\"k\">)</span> use different ids.\nThe traceback <span class=\"k\">for</span> the exception was written to the log file\n</pre></div>\n\n\n<p>fix with</p>\n<div class=\"codehilite\"><pre><span></span>$ hg diff\ndiff -r e8fd4d57e182 drcsim_gazebo/launch/atlas_robotiq_hands.launch\n--- a/drcsim_gazebo/launch/atlas_robotiq_hands.launch   Fri Dec 19 14:38:10 2014 -0800\n+++ b/drcsim_gazebo/launch/atlas_robotiq_hands.launch   Fri Dec 19 18:38:59 2014 -0800\n@@ -31,6 +31,4 @@\n   <span class=\"nt\">&lt;param</span> <span class=\"na\">name=</span><span class=\"s\">&quot;robot_initial_pose/yaw&quot;</span>   <span class=\"na\">value=</span><span class=\"s\">&quot;0&quot;</span> <span class=\"na\">type=</span><span class=\"s\">&quot;double&quot;</span><span class=\"nt\">/&gt;</span>\n\n   <span class=\"nt\">&lt;include</span> <span class=\"na\">file=</span><span class=\"s\">&quot;$(find drcsim_gazebo)/launch/atlas_robotiq_hands_bringup.launch&quot;</span><span class=\"nt\">/&gt;</span>\n-\n-  <span class=\"nt\">&lt;include</span> <span class=\"na\">file=</span><span class=\"s\">&quot;$(find drcsim_gazebo)/launch/atlas$(arg model_args)_bringup.launch&quot;</span><span class=\"nt\">/&gt;</span>\n <span class=\"nt\">&lt;/launch&gt;</span>\n</pre></div>\n\n\n<p>But the robot does a little bit of slow arm swinging left and right on startup,</p>\n<p><img alt=\"atlas_robotiq_hand_v5.png\" src=\"data/bitbucket.org/repo/bae8oa/images/2655498644-atlas_robotiq_hand_v5.png\" /></p>\n<p>and I got new errors:</p>\n<div class=\"codehilite\"><pre><span></span>...\n[ INFO] [1419043178.586742351, 0.055000000]: Bounds for joint[l_arm_wry] is [0.000000, 125.000000], model default is [0.100000]\n[ INFO] [1419043178.586778808, 0.055000000]: Bounds for joint[l_arm_wrx] is [0.000000, 125.000000], model default is [0.100000]\n[ INFO] [1419043178.586810516, 0.055000000]: Bounds for joint[r_arm_shz] is [0.000000, 362.500000], model default is [0.100000]\n[ INFO] [1419043178.586839011, 0.055000000]: Bounds for joint[r_arm_shx] is [0.000000, 412.500000], model default is [0.100000]\n[ INFO] [1419043178.586863106, 0.055000000]: Bounds for joint[r_arm_ely] is [0.000000, 262.500000], model default is [0.100000]\n[ INFO] [1419043178.586890484, 0.055000000]: Bounds for joint[r_arm_elx] is [0.000000, 466.666667], model default is [0.100000]\n[ INFO] [1419043178.586914021, 0.055000000]: Bounds for joint[r_arm_wry] is [0.000000, 125.000000], model default is [0.100000]\n[ INFO] [1419043178.586939513, 0.055000000]: Bounds for joint[r_arm_wrx] is [0.000000, 125.000000], model default is [0.100000]\n[ERROR] [1419043178.589103964, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/back_bkz/\n[ERROR] [1419043178.589643209, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/back_bky/\n[ERROR] [1419043178.590136428, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/back_bkx/\n[ERROR] [1419043178.590658352, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/neck_ry/\n[ERROR] [1419043178.591137045, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/l_leg_hpz/\n[ERROR] [1419043178.591681877, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/l_leg_hpx/\n[ERROR] [1419043178.592181591, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/l_leg_hpy/\n[ERROR] [1419043178.595563722, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/l_leg_aky/\n[ERROR] [1419043178.595984236, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/l_leg_akx/\n[ERROR] [1419043178.596427308, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/r_leg_hpz/\n[ERROR] [1419043178.596959079, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/r_leg_hpx/\n[ERROR] [1419043178.597377359, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/r_leg_hpy/\n[ERROR] [1419043178.599314757, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/r_leg_aky/\n[ERROR] [1419043178.599718579, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/r_leg_akx/\n[ERROR] [1419043178.600111437, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/l_arm_shz/\n[ERROR] [1419043178.606185396, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/l_arm_wry/\n[ERROR] [1419043178.606713744, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/l_arm_wrx/\n[ERROR] [1419043178.607269889, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/r_arm_shz/\n[ERROR] [1419043178.614665170, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/r_arm_wry/\n[ERROR] [1419043178.615228371, 0.055000000]: couldn&#39;t find a param for atlas_controller/gains/r_arm_wrx/\n[ INFO] [1419043178.669913401, 0.056000000]: ros param /atlas_version == 1\n[ INFO] [1419043178.672599429, 0.056000000]: spawn success, set pinLink and call initialize controller\n[ INFO] [1419043178.767142803, 0.058000000]: set robot configuration done\n[AtlasSimInterface] [] Unable to find config value man.psi_supply_label\n [AtlasSimInterface] Could not find config entry man.psi_supply_label when looking for object requested by Atlas3.man\n [AtlasSimInterface] [] Unable to find config value man.psi_intake_label\n [AtlasSimInterface] Could not find config entry man.psi_intake_label when looking for object requested by Atlas3.man\n[ INFO] [1419043178.942782529, 0.112000000]: advertised as /joint_states\n\n [ INFO] [1419043184.712644397, 2.059000000]: going into stand prep\n[ INFO] [1419043190.673561771, 4.059000000]: going into Nominal\n[ INFO] [1419043190.987095079, 4.158000000]: going into Dynamic Stand Behavior\n</pre></div>\n\n\n<p>probably need to fix <code>drcsim_gazebo/config/whole_body_trajectory_controller_v5.yaml</code>?</p>", "type": "rendered"}, "created_on": "2014-12-20T02:38:03.623188+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": "2014-12-20T02:44:08.742386+00:00", "type": "pullrequest_comment", "id": 4400865}