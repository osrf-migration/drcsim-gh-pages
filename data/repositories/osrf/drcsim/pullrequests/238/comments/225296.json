{"links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/238/comments/225296.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/238/_/diff#comment-225296"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 238, "links": {"self": {"href": "data/repositories/osrf/drcsim/pullrequests/238.json"}, "html": {"href": "#!/osrf/drcsim/pull-requests/238"}}, "title": "Fixes to vehicle plugin"}, "content": {"raw": "To test the pedal reach, enter the car with the following command:\n~~~\nrostopic pub -1 /drc_world/robot_enter_car geometry_msgs/Pose '{position: {x: -0.01, z: -0.1}}'\n~~~\nThen follow the [atlas control with python tutorial](http://gazebosim.org/wiki/Tutorials/drcsim/2.5/Atlas_control_over_ROS_topics_with_python) and add the following lines to the Traj_data2.yaml file\n~~~\ngas_pedal_prep:\n  - [1.0, \"0 0 0 0      0.10 0 -1.6 1.6 -0.1 0       -0.25 0   -1.9 1.8 -0.1 0    0 0 1.5 1.5 -3.0 0     0 0 1.5 -1.5 -3.0 0\" ]\ngas_pedal_pulse:\n  - [1.0, \"0 0 0 0      0.10 0 -1.6 1.6 -0.1 0       -0.25 0   -1.9 1.8 -0.1 0    0 0 1.5 1.5 -3.0 0     0 0 1.5 -1.5 -3.0 0\" ]\n  - [1.0, \"0 0 0 0      0.10 0 -1.6 1.6 -0.1 0       -0.25 0   -1.9 1.4  0.4 0    0 0 1.5 1.5 -3.0 0     0 0 1.5 -1.5 -3.0 0\" ]\n  - [3.0, \"0 0 0 0      0.10 0 -1.6 1.6 -0.1 0       -0.25 0   -1.6 1.4  0.4 0    0 0 1.5 1.5 -3.0 0     0 0 1.5 -1.5 -3.0 0\" ]\n  - [1.0, \"0 0 0 0      0.10 0 -1.6 1.6 -0.1 0       -0.25 0   -1.9 1.8 -0.1 0    0 0 1.5 1.5 -3.0 0     0 0 1.5 -1.5 -3.0 0\" ]\ntalladega:\n  - [1.0, \"0 0 0 0      0.10 0 -1.6 1.6 -0.1 0       -0.25 0   -1.9 1.8 -0.1 0    0 0 1.5 1.5 -3.0 0     0 0 1.5 -1.5 -3.0 0\" ]\n  - [1.0, \"0 0 0 0      0.10 0 -1.6 1.6 -0.1 0       -0.25 0   -1.9 1.4  0.4 0    0 0 1.5 1.5 -3.0 0     0 0 1.5 -1.5 -3.0 0\" ]\n~~~\nRun gas_pedal_prep and then gas_pedal_pulse or talladega to push the gas pedal. Note that the car won't move until you release the hand brake, either manually or with the following commands (an intermediate 0.5 command is needed due to a quirk in mixing the tele-operation code with bistable switch behavior of the mechanical interaction):\n~~~\nrostopic pub --once /drc_vehicle/hand_brake/cmd std_msgs/Float64 '{ data : 0.5 }'\nrostopic pub --once /drc_vehicle/hand_brake/cmd std_msgs/Float64 '{ data : 0.0 }'\n~~~\nTo test control of the pedals without the pin joint, set /atlas/mode to nominal, which breaks the pin joint and lets the robot fall onto the seat.\n~~~\nrostopic pub -1 /atlas/mode std_msgs/String -- nominal\n~~~", "markup": "markdown", "html": "<p>To test the pedal reach, enter the car with the following command:</p>\n<div class=\"codehilite\"><pre><span></span>rostopic pub -1 /drc_world/robot_enter_car geometry_msgs/Pose &#39;{position: {x: -0.01, z: -0.1}}&#39;\n</pre></div>\n\n\n<p>Then follow the <a data-is-external-link=\"true\" href=\"http://gazebosim.org/wiki/Tutorials/drcsim/2.5/Atlas_control_over_ROS_topics_with_python\" rel=\"nofollow\">atlas control with python tutorial</a> and add the following lines to the Traj_data2.yaml file</p>\n<div class=\"codehilite\"><pre><span></span>gas_pedal_prep:\n  - [1.0, &quot;0 0 0 0      0.10 0 -1.6 1.6 -0.1 0       -0.25 0   -1.9 1.8 -0.1 0    0 0 1.5 1.5 -3.0 0     0 0 1.5 -1.5 -3.0 0&quot; ]\ngas_pedal_pulse:\n  - [1.0, &quot;0 0 0 0      0.10 0 -1.6 1.6 -0.1 0       -0.25 0   -1.9 1.8 -0.1 0    0 0 1.5 1.5 -3.0 0     0 0 1.5 -1.5 -3.0 0&quot; ]\n  - [1.0, &quot;0 0 0 0      0.10 0 -1.6 1.6 -0.1 0       -0.25 0   -1.9 1.4  0.4 0    0 0 1.5 1.5 -3.0 0     0 0 1.5 -1.5 -3.0 0&quot; ]\n  - [3.0, &quot;0 0 0 0      0.10 0 -1.6 1.6 -0.1 0       -0.25 0   -1.6 1.4  0.4 0    0 0 1.5 1.5 -3.0 0     0 0 1.5 -1.5 -3.0 0&quot; ]\n  - [1.0, &quot;0 0 0 0      0.10 0 -1.6 1.6 -0.1 0       -0.25 0   -1.9 1.8 -0.1 0    0 0 1.5 1.5 -3.0 0     0 0 1.5 -1.5 -3.0 0&quot; ]\ntalladega:\n  - [1.0, &quot;0 0 0 0      0.10 0 -1.6 1.6 -0.1 0       -0.25 0   -1.9 1.8 -0.1 0    0 0 1.5 1.5 -3.0 0     0 0 1.5 -1.5 -3.0 0&quot; ]\n  - [1.0, &quot;0 0 0 0      0.10 0 -1.6 1.6 -0.1 0       -0.25 0   -1.9 1.4  0.4 0    0 0 1.5 1.5 -3.0 0     0 0 1.5 -1.5 -3.0 0&quot; ]\n</pre></div>\n\n\n<p>Run gas_pedal_prep and then gas_pedal_pulse or talladega to push the gas pedal. Note that the car won't move until you release the hand brake, either manually or with the following commands (an intermediate 0.5 command is needed due to a quirk in mixing the tele-operation code with bistable switch behavior of the mechanical interaction):</p>\n<div class=\"codehilite\"><pre><span></span>rostopic pub --once /drc_vehicle/hand_brake/cmd std_msgs/Float64 &#39;{ data : 0.5 }&#39;\nrostopic pub --once /drc_vehicle/hand_brake/cmd std_msgs/Float64 &#39;{ data : 0.0 }&#39;\n</pre></div>\n\n\n<p>To test control of the pedals without the pin joint, set /atlas/mode to nominal, which breaks the pin joint and lets the robot fall onto the seat.</p>\n<div class=\"codehilite\"><pre><span></span>rostopic pub -1 /atlas/mode std_msgs/String -- nominal\n</pre></div>", "type": "rendered"}, "created_on": "2013-04-29T21:49:25.388621+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2013-04-29T21:49:25.395274+00:00", "type": "pullrequest_comment", "id": 225296}