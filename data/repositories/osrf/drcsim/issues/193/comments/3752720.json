{"links": {"self": {"href": "data/repositories/osrf/drcsim/issues/193/comments/3752720.json"}, "html": {"href": "#!/osrf/drcsim/issues/193#comment-3752720"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/drcsim/issues/193.json"}}, "type": "issue", "id": 193, "repository": {"links": {"self": {"href": "data/repositories/osrf/drcsim.json"}, "html": {"href": "#!/osrf/drcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{247b5408-ae91-4e3c-b2f9-a21994658d11}ts=c_plus_plus"}}, "type": "repository", "name": "drcsim", "full_name": "osrf/drcsim", "uuid": "{247b5408-ae91-4e3c-b2f9-a21994658d11}"}, "title": "Force Torque sensor does not give correct results for torque and is extremely noisy"}, "content": {"raw": "According to the documentation on JointWrench the body2wrench in expressed in the center of mass frame of the child link:\n\n```\n    /// \\class JointWrench JointWrench.hh physics/physics.hh\n    /// \\brief Wrench information from a joint.  These are\n    /// forces and torques on parent and child Links, relative to the Link's\n    /// center of mass.\n```\n\nHowever, in the simple test case the body2wrench is clearly expressed in the joint frame. If the wrench was expressed in the child CoM frame, the expected torque part of the wrench measured in joint2 would be 0 (zero) when the system comes to rest. However, the Y component is 5Nm (as expected for a wrench in a joint frame).\n\nThe ODE documentation is not really clear about which frames the forces and torques are expressed in, but I would say the center of mass frame:\n\n```\ntypedef struct dJointFeedback {\n    dVector3 f1; // force that joint applies to body 1\n    dVector3 t1; // torque that joint applies to body 1\n    dVector3 f2; // force that joint applies to body 2\n    dVector3 t2; // torque that joint applies to body 2\n} dJointFeedback;\n```\n\nI think a change in reference frame is necessary for either the applied force or the constraint force and clarification in the documentation is necessary. ", "markup": "markdown", "html": "<p>According to the documentation on JointWrench the body2wrench in expressed in the center of mass frame of the child link:</p>\n<div class=\"codehilite\"><pre><span></span>    /// \\class JointWrench JointWrench.hh physics/physics.hh\n    /// \\brief Wrench information from a joint.  These are\n    /// forces and torques on parent and child Links, relative to the Link&#39;s\n    /// center of mass.\n</pre></div>\n\n\n<p>However, in the simple test case the body2wrench is clearly expressed in the joint frame. If the wrench was expressed in the child CoM frame, the expected torque part of the wrench measured in joint2 would be 0 (zero) when the system comes to rest. However, the Y component is 5Nm (as expected for a wrench in a joint frame).</p>\n<p>The ODE documentation is not really clear about which frames the forces and torques are expressed in, but I would say the center of mass frame:</p>\n<div class=\"codehilite\"><pre><span></span>typedef struct dJointFeedback {\n    dVector3 f1; // force that joint applies to body 1\n    dVector3 t1; // torque that joint applies to body 1\n    dVector3 f2; // force that joint applies to body 2\n    dVector3 t2; // torque that joint applies to body 2\n} dJointFeedback;\n</pre></div>\n\n\n<p>I think a change in reference frame is necessary for either the applied force or the constraint force and clarification in the documentation is necessary. </p>", "type": "rendered"}, "created_on": "2013-04-15T16:19:50.835887+00:00", "user": {"display_name": "Jesper Smith", "uuid": "{61d9fe7d-e554-408c-99fb-faefa9c96114}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B61d9fe7d-e554-408c-99fb-faefa9c96114%7D"}, "html": {"href": "https://bitbucket.org/%7B61d9fe7d-e554-408c-99fb-faefa9c96114%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/56b6560717cfbb0f4a2cc0af6e638650d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJS-4.png"}}, "nickname": "jespersmith", "type": "user", "account_id": "557058:2e842f1c-d9d5-48b1-88ae-5dd9e81a6f77"}, "updated_on": null, "type": "issue_comment", "id": 3752720}