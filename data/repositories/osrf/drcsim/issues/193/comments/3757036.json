{"links": {"self": {"href": "data/repositories/osrf/drcsim/issues/193/comments/3757036.json"}, "html": {"href": "#!/osrf/drcsim/issues/193#comment-3757036"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/drcsim/issues/193.json"}}, "type": "issue", "id": 193, "repository": {"links": {"self": {"href": "data/repositories/osrf/drcsim.json"}, "html": {"href": "#!/osrf/drcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{247b5408-ae91-4e3c-b2f9-a21994658d11}ts=c_plus_plus"}}, "type": "repository", "name": "drcsim", "full_name": "osrf/drcsim", "uuid": "{247b5408-ae91-4e3c-b2f9-a21994658d11}"}, "title": "Force Torque sensor does not give correct results for torque and is extremely noisy"}, "content": {"raw": "To check if the frames are correct I would\n\ngive link3 an inertial offset of (0.5, 0.5, 0.5)\ncontrol joint2 to (-pi/4.0)\n\nAssuming that the wrench is in the joint frame immediately after rotation (we call it the after joint frame), the expected wrench is \n\nfx = 10.0 m/s^2 * 1kg * sin(-pi/4) = -7 N\nfy = 0.0 N\nfz = 10.0 m/s^2 * 1kg * sin(-pi/4) = -7N\ntx = 10.0 m/s^2 * 1kg * 0.5m * sin(-pi/4) = -3.5 Nm\nty = 0.0 Nm\ntz = 10.0 m/s^2 * 1kg * -0.5m * sin(-pi/4) = 3.5 Nm\n(double check these calculations)\n\nThis seems to match with what I'm getting when running my test case. The unit test can be reflected to include this.\n\nIt seems that the JointWrench.hh is wrong about the reference frame of the body2frame wrench. The wrench is in the joint frame immediately after rotation.\n\n\n\n\n```\n<link name=\"link3\">\n                <pose>2.0 0 2.0 0 0 0</pose>\n                <collision name=\"collision\">\n                    <pose>0.5 0 0.5 0 0 0</pose>\n                    <geometry>\n                        <box>\n                            <size>1 1 1</size>\n                        </box>\n                    </geometry>\n                </collision>\n                <visual name=\"visual\">\n                    <pose>0.5 0 0.5 0 0 0</pose>\n                    <geometry>\n                        <box>\n                            <size>1 1 1</size>\n                        </box>\n                    </geometry>\n                </visual>\n                <inertial>\n                    <mass>1.0</mass>\n                    <pose>0.5 0.5 0.5 0 0 0</pose>\n                    <inertia>\n                        <ixx>0.1</ixx>\n                        <iyy>0.1</iyy>\n                        <izz>0.1</izz>\n                        <ixy>0.1</ixy>\n                        <ixz>0.1</ixz>\n                        <iyz>0.1</iyz>\n                    </inertia>\n                </inertial>\n            </link>\n```", "markup": "markdown", "html": "<p>To check if the frames are correct I would</p>\n<p>give link3 an inertial offset of (0.5, 0.5, 0.5)\ncontrol joint2 to (-pi/4.0)</p>\n<p>Assuming that the wrench is in the joint frame immediately after rotation (we call it the after joint frame), the expected wrench is </p>\n<p>fx = 10.0 m/s^2 * 1kg * sin(-pi/4) = -7 N\nfy = 0.0 N\nfz = 10.0 m/s^2 * 1kg * sin(-pi/4) = -7N\ntx = 10.0 m/s^2 * 1kg * 0.5m * sin(-pi/4) = -3.5 Nm\nty = 0.0 Nm\ntz = 10.0 m/s^2 * 1kg * -0.5m * sin(-pi/4) = 3.5 Nm\n(double check these calculations)</p>\n<p>This seems to match with what I'm getting when running my test case. The unit test can be reflected to include this.</p>\n<p>It seems that the JointWrench.hh is wrong about the reference frame of the body2frame wrench. The wrench is in the joint frame immediately after rotation.</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">&lt;link</span> <span class=\"na\">name=</span><span class=\"s\">&quot;link3&quot;</span><span class=\"nt\">&gt;</span>\n                <span class=\"nt\">&lt;pose&gt;</span>2.0 0 2.0 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n                <span class=\"nt\">&lt;collision</span> <span class=\"na\">name=</span><span class=\"s\">&quot;collision&quot;</span><span class=\"nt\">&gt;</span>\n                    <span class=\"nt\">&lt;pose&gt;</span>0.5 0 0.5 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n                    <span class=\"nt\">&lt;geometry&gt;</span>\n                        <span class=\"nt\">&lt;box&gt;</span>\n                            <span class=\"nt\">&lt;size&gt;</span>1 1 1<span class=\"nt\">&lt;/size&gt;</span>\n                        <span class=\"nt\">&lt;/box&gt;</span>\n                    <span class=\"nt\">&lt;/geometry&gt;</span>\n                <span class=\"nt\">&lt;/collision&gt;</span>\n                <span class=\"nt\">&lt;visual</span> <span class=\"na\">name=</span><span class=\"s\">&quot;visual&quot;</span><span class=\"nt\">&gt;</span>\n                    <span class=\"nt\">&lt;pose&gt;</span>0.5 0 0.5 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n                    <span class=\"nt\">&lt;geometry&gt;</span>\n                        <span class=\"nt\">&lt;box&gt;</span>\n                            <span class=\"nt\">&lt;size&gt;</span>1 1 1<span class=\"nt\">&lt;/size&gt;</span>\n                        <span class=\"nt\">&lt;/box&gt;</span>\n                    <span class=\"nt\">&lt;/geometry&gt;</span>\n                <span class=\"nt\">&lt;/visual&gt;</span>\n                <span class=\"nt\">&lt;inertial&gt;</span>\n                    <span class=\"nt\">&lt;mass&gt;</span>1.0<span class=\"nt\">&lt;/mass&gt;</span>\n                    <span class=\"nt\">&lt;pose&gt;</span>0.5 0.5 0.5 0 0 0<span class=\"nt\">&lt;/pose&gt;</span>\n                    <span class=\"nt\">&lt;inertia&gt;</span>\n                        <span class=\"nt\">&lt;ixx&gt;</span>0.1<span class=\"nt\">&lt;/ixx&gt;</span>\n                        <span class=\"nt\">&lt;iyy&gt;</span>0.1<span class=\"nt\">&lt;/iyy&gt;</span>\n                        <span class=\"nt\">&lt;izz&gt;</span>0.1<span class=\"nt\">&lt;/izz&gt;</span>\n                        <span class=\"nt\">&lt;ixy&gt;</span>0.1<span class=\"nt\">&lt;/ixy&gt;</span>\n                        <span class=\"nt\">&lt;ixz&gt;</span>0.1<span class=\"nt\">&lt;/ixz&gt;</span>\n                        <span class=\"nt\">&lt;iyz&gt;</span>0.1<span class=\"nt\">&lt;/iyz&gt;</span>\n                    <span class=\"nt\">&lt;/inertia&gt;</span>\n                <span class=\"nt\">&lt;/inertial&gt;</span>\n            <span class=\"nt\">&lt;/link&gt;</span>\n</pre></div>", "type": "rendered"}, "created_on": "2013-04-15T20:49:20.966173+00:00", "user": {"display_name": "Jesper Smith", "uuid": "{61d9fe7d-e554-408c-99fb-faefa9c96114}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B61d9fe7d-e554-408c-99fb-faefa9c96114%7D"}, "html": {"href": "https://bitbucket.org/%7B61d9fe7d-e554-408c-99fb-faefa9c96114%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/56b6560717cfbb0f4a2cc0af6e638650d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJS-4.png"}}, "nickname": "jespersmith", "type": "user", "account_id": "557058:2e842f1c-d9d5-48b1-88ae-5dd9e81a6f77"}, "updated_on": null, "type": "issue_comment", "id": 3757036}