{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/drcsim.json"}, "html": {"href": "#!/osrf/drcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{247b5408-ae91-4e3c-b2f9-a21994658d11}ts=c_plus_plus"}}, "type": "repository", "name": "drcsim", "full_name": "osrf/drcsim", "uuid": "{247b5408-ae91-4e3c-b2f9-a21994658d11}"}, "links": {"attachments": {"href": "data/repositories/osrf/drcsim/issues/417/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/drcsim/issues/417.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/drcsim/issues/417/watch"}, "comments": {"href": "data/repositories/osrf/drcsim/issues/417/comments_page=1.json"}, "html": {"href": "#!/osrf/drcsim/issues/417/irobot-hand-issues"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/drcsim/issues/417/vote"}}, "reporter": {"display_name": "GoRobotGo", "uuid": "{2fd8dac8-286d-461a-b7dd-dba99deea025}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2fd8dac8-286d-461a-b7dd-dba99deea025%7D"}, "html": {"href": "https://bitbucket.org/%7B2fd8dac8-286d-461a-b7dd-dba99deea025%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/6431739b101c18640b5a84d359fdd274d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsG-4.png"}}, "nickname": "GoRobotGo", "type": "user", "account_id": "557058:44b40072-c04b-41ae-ad09-376db9ebffa1"}, "title": "IRobot Hand Issues", "component": null, "votes": 0, "watches": 2, "content": {"raw": "I have begun to look at using the simulated IRobot hand, but have run into a couple of issues.  I have tried both the default and update_irobot_hand_issue_139 branches of drcsim (with the default branch of gazebo as of March 8th).\r\n\r\nThe macro'ed xacro for the irobot hand seems to be incorrect.  Some fingers move forward and close, but other fingers will only move backwards.  I have attached a screenshot.  In the screenshot the two fingers on the right only move backwards while the finger on the left moves as expected.  I would be happy to fix it on a finger by finger basis, but it wasn't obvious how to de-macroize the xacro so different fingers could have different ranges of motion.\r\n\r\nPossibly related to that - a positive value in the irobot control message will generally open the fingers and a negative close.  That doesn't seem tob e the case.  The message I am using:\r\n\r\n```\r\n#!c++\r\n\r\n    handle_msgs::HandleControl irobot_ctrl_msg;\r\n    irobot_ctrl_msg.type[0] = irobot_ctrl_msg.VELOCITY;\r\n    irobot_ctrl_msg.type[1] = irobot_ctrl_msg.VELOCITY;\r\n    irobot_ctrl_msg.type[2] = irobot_ctrl_msg.VELOCITY;\r\n    irobot_ctrl_msg.type[3] = irobot_ctrl_msg.VELOCITY;\r\n    irobot_ctrl_msg.type[4] = irobot_ctrl_msg.VELOCITY;\r\n    irobot_ctrl_msg.valid[0] = true;\r\n    irobot_ctrl_msg.valid[1] = true;\r\n    irobot_ctrl_msg.valid[2] = true;\r\n    irobot_ctrl_msg.valid[3] = true;\r\n    irobot_ctrl_msg.valid[4] = true;\r\n    irobot_ctrl_msg.value[0] = 10000;\r\n    irobot_ctrl_msg.value[1] = 10000;\r\n    irobot_ctrl_msg.value[2] = 10000;\r\n    irobot_ctrl_msg.value[3] = 0;\r\n    irobot_ctrl_msg.value[4] = 0;\r\n```\r\n\r\n\r\nOn the 139 branch the finger that moved in the correct direction on the right hand would not close very far, but would swing back and forth.\r\n\r\nOn the 139 branch the two fingers that move the correct direction on the left hand don't close all the way.\r\n\r\nOn the 139 branch the left two fingers would tilt together for some reason - see the 12-17-21 screenshot.\r\n\r\nFinally, I couldn't get the fingers to rotate (vs close/open) (value[3] & value[4]), but this is less critical for me.\r\n\r\nLet me know what other information you need or what I can do to help.", "markup": "markdown", "html": "<p>I have begun to look at using the simulated IRobot hand, but have run into a couple of issues.  I have tried both the default and update_irobot_hand_issue_139 branches of drcsim (with the default branch of gazebo as of March 8th).</p>\n<p>The macro'ed xacro for the irobot hand seems to be incorrect.  Some fingers move forward and close, but other fingers will only move backwards.  I have attached a screenshot.  In the screenshot the two fingers on the right only move backwards while the finger on the left moves as expected.  I would be happy to fix it on a finger by finger basis, but it wasn't obvious how to de-macroize the xacro so different fingers could have different ranges of motion.</p>\n<p>Possibly related to that - a positive value in the irobot control message will generally open the fingers and a negative close.  That doesn't seem tob e the case.  The message I am using:</p>\n<div class=\"codehilite language-c++\"><pre><span></span>    <span class=\"n\">handle_msgs</span><span class=\"o\">::</span><span class=\"n\">HandleControl</span> <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">;</span>\n    <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">type</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">VELOCITY</span><span class=\"p\">;</span>\n    <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">type</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">VELOCITY</span><span class=\"p\">;</span>\n    <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">type</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">VELOCITY</span><span class=\"p\">;</span>\n    <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">type</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">VELOCITY</span><span class=\"p\">;</span>\n    <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">type</span><span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">VELOCITY</span><span class=\"p\">;</span>\n    <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">valid</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"nb\">true</span><span class=\"p\">;</span>\n    <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">valid</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"nb\">true</span><span class=\"p\">;</span>\n    <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">valid</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"nb\">true</span><span class=\"p\">;</span>\n    <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">valid</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"nb\">true</span><span class=\"p\">;</span>\n    <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">valid</span><span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"nb\">true</span><span class=\"p\">;</span>\n    <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">value</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"mi\">10000</span><span class=\"p\">;</span>\n    <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">value</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"mi\">10000</span><span class=\"p\">;</span>\n    <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">value</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"mi\">10000</span><span class=\"p\">;</span>\n    <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">value</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span>\n    <span class=\"n\">irobot_ctrl_msg</span><span class=\"p\">.</span><span class=\"n\">value</span><span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span>\n</pre></div>\n\n\n<p>On the 139 branch the finger that moved in the correct direction on the right hand would not close very far, but would swing back and forth.</p>\n<p>On the 139 branch the two fingers that move the correct direction on the left hand don't close all the way.</p>\n<p>On the 139 branch the left two fingers would tilt together for some reason - see the 12-17-21 screenshot.</p>\n<p>Finally, I couldn't get the fingers to rotate (vs close/open) (value[3] &amp; value[4]), but this is less critical for me.</p>\n<p>Let me know what other information you need or what I can do to help.</p>", "type": "rendered"}, "assignee": null, "state": "on hold", "version": null, "edited_on": null, "created_on": "2014-03-11T19:21:30.545370+00:00", "milestone": null, "updated_on": "2014-09-16T16:37:05.062806+00:00", "type": "issue", "id": 417}