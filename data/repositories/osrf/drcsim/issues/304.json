{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/drcsim.json"}, "html": {"href": "#!/osrf/drcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{247b5408-ae91-4e3c-b2f9-a21994658d11}ts=c_plus_plus"}}, "type": "repository", "name": "drcsim", "full_name": "osrf/drcsim", "uuid": "{247b5408-ae91-4e3c-b2f9-a21994658d11}"}, "links": {"attachments": {"href": "data/repositories/osrf/drcsim/issues/304/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/drcsim/issues/304.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/drcsim/issues/304/watch"}, "comments": {"href": "data/repositories/osrf/drcsim/issues/304/comments_page=1.json"}, "html": {"href": "#!/osrf/drcsim/issues/304/crash-on-startup-with-immediate-camera"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/drcsim/issues/304/vote"}}, "reporter": {"display_name": "Brian Gerkey", "uuid": "{3d8b5763-9dad-4be7-85c2-a7ab6cd49173}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D"}, "html": {"href": "https://bitbucket.org/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9/5fa9ec73-0fec-4860-a202-e34ae23b6a12/128"}}, "nickname": "Brian Gerkey", "type": "user", "account_id": "557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9"}, "title": "Crash on startup with immediate camera subscription", "component": null, "votes": 0, "watches": 2, "content": {"raw": "Saw this happen, not easily repeatable:\r\n\r\n~~~\r\n[FATAL] [1369687171.053684312]: ASSERTION FAILED\r\n\tfile = /tmp/buildd/ros-fuerte-image-common-1.8.0/debian/ros-fuerte-image-common/opt/ros/fuerte/stacks/image_common/image_transport/src/publisher.cpp\r\n\tline = 155\r\n\tcond = false\r\n\tmessage = \r\n[FATAL] [1369687171.053808265]: Call to publish() on an invalid image_transport::Publisher\r\n[FATAL] [1369687171.053838898]: \r\n\r\nTrace/breakpoint trap\r\n[gazebo-2] process has died [pid 7747, exit code 133, cmd /home/gerkey/code/drc/install/share/drcsim-2.6/ros/atlas_utils/scripts/run_gzserver vrc_task_1.world -q -r --record_encoding=zlib --record_path=/tmp/vrc_task_1 __name:=gazebo __log:=/home/gerkey/.ros/log/866c1fda-c70d-11e2-a350-902b343559be/gazebo-2.log].\r\nlog file: /home/gerkey/.ros/log/866c1fda-c70d-11e2-a350-902b343559be/gazebo-2*.log\r\n~~~\r\n\r\nIt was triggered by this rostest file:\r\n~~~\r\n<launch>\r\n  <include file=\"$(find atlas_utils)/launch/vrc_task_1.launch\">\r\n    <arg name=\"gzname\" value=\"gzserver\"/>\r\n  </include>\r\n  <!-- Test the head -->\r\n  <test pkg=\"atlas_utils\" type=\"multicamera_subscriber\"\r\n        ns=\"/multisense_sl/camera\"\r\n        test-name=\"multicamera_subscriber_head\"\r\n        time-limit=\"360.0\"/>\r\n</launch>\r\n~~~\r\n\r\nThe `multicamera_subscriber` script subscribes to `left/image_raw` and `right/image_raw`.  Feels like something can go wrong if that subscription happens before the gazebo ros camera plugin is fully initialized.", "markup": "markdown", "html": "<p>Saw this happen, not easily repeatable:</p>\n<div class=\"codehilite\"><pre><span></span>[FATAL] [1369687171.053684312]: ASSERTION FAILED\n    file = /tmp/buildd/ros-fuerte-image-common-1.8.0/debian/ros-fuerte-image-common/opt/ros/fuerte/stacks/image_common/image_transport/src/publisher.cpp\n    line = 155\n    cond = false\n    message = \n[FATAL] [1369687171.053808265]: Call to publish() on an invalid image_transport::Publisher\n[FATAL] [1369687171.053838898]: \n\nTrace/breakpoint trap\n[gazebo-2] process has died [pid 7747, exit code 133, cmd /home/gerkey/code/drc/install/share/drcsim-2.6/ros/atlas_utils/scripts/run_gzserver vrc_task_1.world -q -r --record_encoding=zlib --record_path=/tmp/vrc_task_1 __name:=gazebo __log:=/home/gerkey/.ros/log/866c1fda-c70d-11e2-a350-902b343559be/gazebo-2.log].\nlog file: /home/gerkey/.ros/log/866c1fda-c70d-11e2-a350-902b343559be/gazebo-2*.log\n</pre></div>\n\n\n<p>It was triggered by this rostest file:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">&lt;launch&gt;</span>\n  <span class=\"nt\">&lt;include</span> <span class=\"na\">file=</span><span class=\"s\">&quot;$(find atlas_utils)/launch/vrc_task_1.launch&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;arg</span> <span class=\"na\">name=</span><span class=\"s\">&quot;gzname&quot;</span> <span class=\"na\">value=</span><span class=\"s\">&quot;gzserver&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;/include&gt;</span>\n  <span class=\"c\">&lt;!-- Test the head --&gt;</span>\n  <span class=\"nt\">&lt;test</span> <span class=\"na\">pkg=</span><span class=\"s\">&quot;atlas_utils&quot;</span> <span class=\"na\">type=</span><span class=\"s\">&quot;multicamera_subscriber&quot;</span>\n        <span class=\"na\">ns=</span><span class=\"s\">&quot;/multisense_sl/camera&quot;</span>\n        <span class=\"na\">test-name=</span><span class=\"s\">&quot;multicamera_subscriber_head&quot;</span>\n        <span class=\"na\">time-limit=</span><span class=\"s\">&quot;360.0&quot;</span><span class=\"nt\">/&gt;</span>\n<span class=\"nt\">&lt;/launch&gt;</span>\n</pre></div>\n\n\n<p>The <code>multicamera_subscriber</code> script subscribes to <code>left/image_raw</code> and <code>right/image_raw</code>.  Feels like something can go wrong if that subscription happens before the gazebo ros camera plugin is fully initialized.</p>", "type": "rendered"}, "assignee": null, "state": "wontfix", "version": null, "edited_on": null, "created_on": "2013-05-27T20:43:09.591213+00:00", "milestone": null, "updated_on": "2013-07-09T01:54:32.382652+00:00", "type": "issue", "id": 304}