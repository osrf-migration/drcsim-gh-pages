{"links": {"self": {"href": "data/repositories/osrf/drcsim/issues/274/comments/5297189.json"}, "html": {"href": "#!/osrf/drcsim/issues/274#comment-5297189"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/drcsim/issues/274.json"}}, "type": "issue", "id": 274, "repository": {"links": {"self": {"href": "data/repositories/osrf/drcsim.json"}, "html": {"href": "#!/osrf/drcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{247b5408-ae91-4e3c-b2f9-a21994658d11}ts=c_plus_plus"}}, "type": "repository", "name": "drcsim", "full_name": "osrf/drcsim", "uuid": "{247b5408-ae91-4e3c-b2f9-a21994658d11}"}, "title": "/usr/share/drcsim/setup.sh takes a long time"}, "content": {"raw": "Adding `-type f` doesn't have a noticable effect:\n\n~~~\n$ time find /usr/share -path /usr/share/drcsim-'*'/setup.sh | sort | tail -n 1\n/usr/share/drcsim-2.6/setup.sh\n\nreal  0m2.492s\nuser  0m0.208s\nsys   0m0.576s\n~~~\n\n~~~\n$ time find /usr/share -type f -path /usr/share/drcsim-'*'/setup.sh | sort | tail -n 1\n/usr/share/drcsim-2.6/setup.sh\n\nreal  0m2.488s\nuser  0m0.200s\nsys   0m0.596s\n~~~\n\nIn between runs, I followed [this tip](http://stackoverflow.com/questions/9551838/how-to-purge-disk-i-o-caches-on-linux) to clear disk caches via `echo 3 | sudo tee /proc/sys/vm/drop_caches`.  Otherwise, the first run is slow and the rest of the runs are much faster, once that part of the file system has been cached.\n\nEDIT: I get the same results doing the test directly on the search for gazebo's `setup.sh`, without going through drcsim's `setup.sh`.", "markup": "markdown", "html": "<p>Adding <code>-type f</code> doesn't have a noticable effect:</p>\n<div class=\"codehilite\"><pre><span></span>$ <span class=\"nb\">time</span> find /usr/share -path /usr/share/drcsim-<span class=\"s1\">&#39;*&#39;</span>/setup.sh <span class=\"p\">|</span> sort <span class=\"p\">|</span> tail -n <span class=\"m\">1</span>\n/usr/share/drcsim-2.6/setup.sh\n\nreal  0m2.492s\nuser  0m0.208s\nsys   0m0.576s\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>$ <span class=\"nb\">time</span> find /usr/share -type f -path /usr/share/drcsim-<span class=\"s1\">&#39;*&#39;</span>/setup.sh <span class=\"p\">|</span> sort <span class=\"p\">|</span> tail -n <span class=\"m\">1</span>\n/usr/share/drcsim-2.6/setup.sh\n\nreal  0m2.488s\nuser  0m0.200s\nsys   0m0.596s\n</pre></div>\n\n\n<p>In between runs, I followed <a data-is-external-link=\"true\" href=\"http://stackoverflow.com/questions/9551838/how-to-purge-disk-i-o-caches-on-linux\" rel=\"nofollow\">this tip</a> to clear disk caches via <code>echo 3 | sudo tee /proc/sys/vm/drop_caches</code>.  Otherwise, the first run is slow and the rest of the runs are much faster, once that part of the file system has been cached.</p>\n<p>EDIT: I get the same results doing the test directly on the search for gazebo's <code>setup.sh</code>, without going through drcsim's <code>setup.sh</code>.</p>", "type": "rendered"}, "created_on": "2013-07-23T16:56:14.177299+00:00", "user": {"display_name": "Brian Gerkey", "uuid": "{3d8b5763-9dad-4be7-85c2-a7ab6cd49173}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D"}, "html": {"href": "https://bitbucket.org/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9/5fa9ec73-0fec-4860-a202-e34ae23b6a12/128"}}, "nickname": "Brian Gerkey", "type": "user", "account_id": "557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9"}, "updated_on": "2013-07-23T16:58:02.068102+00:00", "type": "issue_comment", "id": 5297189}