{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/drcsim/issues/343/comments/5734591.json"}, "html": {"href": "#!/osrf/drcsim/issues/343#comment-5734591"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/drcsim/issues/343.json"}}, "type": "issue", "id": 343, "repository": {"links": {"self": {"href": "data/repositories/osrf/drcsim.json"}, "html": {"href": "#!/osrf/drcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{247b5408-ae91-4e3c-b2f9-a21994658d11}ts=c_plus_plus"}}, "type": "repository", "name": "drcsim", "full_name": "osrf/drcsim", "uuid": "{247b5408-ae91-4e3c-b2f9-a21994658d11}"}, "title": "Remove `k_effort` from `atlas_msgs` to match `AtlasRobotInterface`"}, "content": {"raw": "Note: removing k_effort will break some VRC behaviors.\n\nFor example, there is no way to hold a tool or hose and use the BDI walking interface without using k_effort to force control of hands and arms.\n\nIssue raised with BDI, but no replacement behavior yet.\n\nWe may want to keep in place for a while with knowledge that there is a disconnect for now.\n\n\n", "markup": "markdown", "html": "<p>Note: removing k_effort will break some VRC behaviors.</p>\n<p>For example, there is no way to hold a tool or hose and use the BDI walking interface without using k_effort to force control of hands and arms.</p>\n<p>Issue raised with BDI, but no replacement behavior yet.</p>\n<p>We may want to keep in place for a while with knowledge that there is a disconnect for now.</p>", "type": "rendered"}, "created_on": "2013-08-21T16:11:54.565500+00:00", "user": {"display_name": "David Conner", "uuid": "{4375dc4a-9371-4c51-973e-1f1d045590c5}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B4375dc4a-9371-4c51-973e-1f1d045590c5%7D"}, "html": {"href": "https://bitbucket.org/%7B4375dc4a-9371-4c51-973e-1f1d045590c5%7D/"}, "avatar": {"href": "https://bitbucket.org/account/dcconner/avatar/"}}, "nickname": "dcconner", "type": "user", "account_id": null}, "updated_on": null, "type": "issue_comment", "id": 5734591}, {"links": {"self": {"href": "data/repositories/osrf/drcsim/issues/343/comments/6901307.json"}, "html": {"href": "#!/osrf/drcsim/issues/343#comment-6901307"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/drcsim/issues/343.json"}}, "type": "issue", "id": 343, "repository": {"links": {"self": {"href": "data/repositories/osrf/drcsim.json"}, "html": {"href": "#!/osrf/drcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{247b5408-ae91-4e3c-b2f9-a21994658d11}ts=c_plus_plus"}}, "type": "repository", "name": "drcsim", "full_name": "osrf/drcsim", "uuid": "{247b5408-ae91-4e3c-b2f9-a21994658d11}"}, "title": "Remove `k_effort` from `atlas_msgs` to match `AtlasRobotInterface`"}, "content": {"raw": "It's not clear to me that we want to remove `k_effort`.  As @dcconner points out, it will break some existing simulation-only code.  And given that the real robot doesn't accept or produce the messages that we're using in simulation, removing `k_effort` from those messages won't, on its own, make it possible to send the same messages to hardware and simulation.\n\nTo switch between simulation and hardware, I'm assuming that teams are using something like [atlas_interface](#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_tutorials/atlas_interface/src/atlas_interface.cpp?at=default), which internally handles setting appropriate values in `k_effort`.", "markup": "markdown", "html": "<p>It's not clear to me that we want to remove <code>k_effort</code>.  As @dcconner points out, it will break some existing simulation-only code.  And given that the real robot doesn't accept or produce the messages that we're using in simulation, removing <code>k_effort</code> from those messages won't, on its own, make it possible to send the same messages to hardware and simulation.</p>\n<p>To switch between simulation and hardware, I'm assuming that teams are using something like <a data-is-external-link=\"true\" href=\"#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_tutorials/atlas_interface/src/atlas_interface.cpp?at=default\" rel=\"nofollow\">atlas_interface</a>, which internally handles setting appropriate values in <code>k_effort</code>.</p>", "type": "rendered"}, "created_on": "2013-11-14T20:56:33.719805+00:00", "user": {"display_name": "Brian Gerkey", "uuid": "{3d8b5763-9dad-4be7-85c2-a7ab6cd49173}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D"}, "html": {"href": "https://bitbucket.org/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9/5fa9ec73-0fec-4860-a202-e34ae23b6a12/128"}}, "nickname": "Brian Gerkey", "type": "user", "account_id": "557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9"}, "updated_on": null, "type": "issue_comment", "id": 6901307}, {"links": {"self": {"href": "data/repositories/osrf/drcsim/issues/343/comments/6904294.json"}, "html": {"href": "#!/osrf/drcsim/issues/343#comment-6904294"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/drcsim/issues/343.json"}}, "type": "issue", "id": 343, "repository": {"links": {"self": {"href": "data/repositories/osrf/drcsim.json"}, "html": {"href": "#!/osrf/drcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{247b5408-ae91-4e3c-b2f9-a21994658d11}ts=c_plus_plus"}}, "type": "repository", "name": "drcsim", "full_name": "osrf/drcsim", "uuid": "{247b5408-ae91-4e3c-b2f9-a21994658d11}"}, "title": "Remove `k_effort` from `atlas_msgs` to match `AtlasRobotInterface`"}, "content": {"raw": "One option is to change implementation of [AtlasPlugin::SetAtlasCommand](#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_gazebo_ros_plugins/src/AtlasPlugin.cpp?at=default#cl-930) such that if [`set_desired_behavior(\"User\")`](#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_model_resources/AtlasSimInterface_1.1.1/include/AtlasSimInterface_1.1.1/AtlasSimInterface.h?at=default#cl-152), then switch to individual joint control (equivalent to `k_effort = 255`) using commands from [`AtlasJointDesired`](#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_model_resources/AtlasSimInterface_1.1.1/include/AtlasSimInterface_1.1.1/AtlasSimInterfaceTypes.h?at=default#cl-80) and [`AtlasJointControlParams`](#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_model_resources/AtlasSimInterface_1.1.1/include/AtlasSimInterface_1.1.1/AtlasSimInterfaceTypes.h?at=default#cl-120) with the following mapping:\n\n *  [`atlas_msgs::position`](#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/atlas_msgs/msg/AtlasCommand.msg?at=default#cl-21) is implemented by [`AtlasJointDesired::q_d`](#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_model_resources/AtlasSimInterface_1.1.1/include/AtlasSimInterface_1.1.1/AtlasSimInterfaceTypes.h?at=default#cl-82)\n *  [`atlas_msgs::velocity`](#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/atlas_msgs/msg/AtlasCommand.msg?at=default#cl-22) is implemented by [`AtlasJointDesired::qd_d`](#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_model_resources/AtlasSimInterface_1.1.1/include/AtlasSimInterface_1.1.1/AtlasSimInterfaceTypes.h?at=default#cl-83)\n *  [`atlas_msgs::effort`](#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/atlas_msgs/msg/AtlasCommand.msg?at=default#cl-23) is implemented by [`AtlasJointDesired::f_d`](#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_model_resources/AtlasSimInterface_1.1.1/include/AtlasSimInterface_1.1.1/AtlasSimInterfaceTypes.h?at=default#cl-84)\n * [`atlas_msgs::kp_position`](#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/atlas_msgs/msg/AtlasCommand.msg?at=default#cl-25) is implemented by [`AtlasJointControlParams::k_q_p`](#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_model_resources/AtlasSimInterface_1.1.1/include/AtlasSimInterface_1.1.1/AtlasSimInterfaceTypes.h?at=default#cl-122)\n * [`atlas_msgs::ki_position`](#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/atlas_msgs/msg/AtlasCommand.msg?at=default#cl-26) is implemented by [`AtlasJointControlParams::k_q_i`](#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_model_resources/AtlasSimInterface_1.1.1/include/AtlasSimInterface_1.1.1/AtlasSimInterfaceTypes.h?at=default#cl-123)\n * [`atlas_msgs::kd_position`](#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/atlas_msgs/msg/AtlasCommand.msg?at=default#cl-27) is ignored.\n * [`atlas_msgs::kp_velocity`](#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/atlas_msgs/msg/AtlasCommand.msg?at=default#cl-28) is implemented by [`AtlasJointControlParams::k_qd_p`](#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_model_resources/AtlasSimInterface_1.1.1/include/AtlasSimInterface_1.1.1/AtlasSimInterfaceTypes.h?at=default#cl-124)\n \nWhile `set_desired_behavior(\"[...not User...]\")` controls the robot by behavior library, equivalent to setting `k_effort` to 0.", "markup": "markdown", "html": "<p>One option is to change implementation of <a data-is-external-link=\"true\" href=\"#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_gazebo_ros_plugins/src/AtlasPlugin.cpp?at=default#cl-930\" rel=\"nofollow\">AtlasPlugin::SetAtlasCommand</a> such that if <a data-is-external-link=\"true\" href=\"#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_model_resources/AtlasSimInterface_1.1.1/include/AtlasSimInterface_1.1.1/AtlasSimInterface.h?at=default#cl-152\" rel=\"nofollow\"><code>set_desired_behavior(\"User\")</code></a>, then switch to individual joint control (equivalent to <code>k_effort = 255</code>) using commands from <a data-is-external-link=\"true\" href=\"#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_model_resources/AtlasSimInterface_1.1.1/include/AtlasSimInterface_1.1.1/AtlasSimInterfaceTypes.h?at=default#cl-80\" rel=\"nofollow\"><code>AtlasJointDesired</code></a> and <a data-is-external-link=\"true\" href=\"#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_model_resources/AtlasSimInterface_1.1.1/include/AtlasSimInterface_1.1.1/AtlasSimInterfaceTypes.h?at=default#cl-120\" rel=\"nofollow\"><code>AtlasJointControlParams</code></a> with the following mapping:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/atlas_msgs/msg/AtlasCommand.msg?at=default#cl-21\" rel=\"nofollow\"><code>atlas_msgs::position</code></a> is implemented by <a data-is-external-link=\"true\" href=\"#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_model_resources/AtlasSimInterface_1.1.1/include/AtlasSimInterface_1.1.1/AtlasSimInterfaceTypes.h?at=default#cl-82\" rel=\"nofollow\"><code>AtlasJointDesired::q_d</code></a></li>\n<li><a data-is-external-link=\"true\" href=\"#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/atlas_msgs/msg/AtlasCommand.msg?at=default#cl-22\" rel=\"nofollow\"><code>atlas_msgs::velocity</code></a> is implemented by <a data-is-external-link=\"true\" href=\"#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_model_resources/AtlasSimInterface_1.1.1/include/AtlasSimInterface_1.1.1/AtlasSimInterfaceTypes.h?at=default#cl-83\" rel=\"nofollow\"><code>AtlasJointDesired::qd_d</code></a></li>\n<li><a data-is-external-link=\"true\" href=\"#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/atlas_msgs/msg/AtlasCommand.msg?at=default#cl-23\" rel=\"nofollow\"><code>atlas_msgs::effort</code></a> is implemented by <a data-is-external-link=\"true\" href=\"#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_model_resources/AtlasSimInterface_1.1.1/include/AtlasSimInterface_1.1.1/AtlasSimInterfaceTypes.h?at=default#cl-84\" rel=\"nofollow\"><code>AtlasJointDesired::f_d</code></a></li>\n<li><a data-is-external-link=\"true\" href=\"#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/atlas_msgs/msg/AtlasCommand.msg?at=default#cl-25\" rel=\"nofollow\"><code>atlas_msgs::kp_position</code></a> is implemented by <a data-is-external-link=\"true\" href=\"#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_model_resources/AtlasSimInterface_1.1.1/include/AtlasSimInterface_1.1.1/AtlasSimInterfaceTypes.h?at=default#cl-122\" rel=\"nofollow\"><code>AtlasJointControlParams::k_q_p</code></a></li>\n<li><a data-is-external-link=\"true\" href=\"#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/atlas_msgs/msg/AtlasCommand.msg?at=default#cl-26\" rel=\"nofollow\"><code>atlas_msgs::ki_position</code></a> is implemented by <a data-is-external-link=\"true\" href=\"#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_model_resources/AtlasSimInterface_1.1.1/include/AtlasSimInterface_1.1.1/AtlasSimInterfaceTypes.h?at=default#cl-123\" rel=\"nofollow\"><code>AtlasJointControlParams::k_q_i</code></a></li>\n<li><a data-is-external-link=\"true\" href=\"#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/atlas_msgs/msg/AtlasCommand.msg?at=default#cl-27\" rel=\"nofollow\"><code>atlas_msgs::kd_position</code></a> is ignored.</li>\n<li><a data-is-external-link=\"true\" href=\"#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/atlas_msgs/msg/AtlasCommand.msg?at=default#cl-28\" rel=\"nofollow\"><code>atlas_msgs::kp_velocity</code></a> is implemented by <a data-is-external-link=\"true\" href=\"#!/osrf/drcsim/src/be43cd53fa1eb192e594ebf4f057406a6b86afc3/drcsim_model_resources/AtlasSimInterface_1.1.1/include/AtlasSimInterface_1.1.1/AtlasSimInterfaceTypes.h?at=default#cl-124\" rel=\"nofollow\"><code>AtlasJointControlParams::k_qd_p</code></a></li>\n</ul>\n<p>While <code>set_desired_behavior(\"[...not User...]\")</code> controls the robot by behavior library, equivalent to setting <code>k_effort</code> to 0.</p>", "type": "rendered"}, "created_on": "2013-11-15T01:14:15.941686+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": null, "type": "issue_comment", "id": 6904294}, {"links": {"self": {"href": "data/repositories/osrf/drcsim/issues/343/comments/12380698.json"}, "html": {"href": "#!/osrf/drcsim/issues/343#comment-12380698"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/drcsim/issues/343.json"}}, "type": "issue", "id": 343, "repository": {"links": {"self": {"href": "data/repositories/osrf/drcsim.json"}, "html": {"href": "#!/osrf/drcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{247b5408-ae91-4e3c-b2f9-a21994658d11}ts=c_plus_plus"}}, "type": "repository", "name": "drcsim", "full_name": "osrf/drcsim", "uuid": "{247b5408-ae91-4e3c-b2f9-a21994658d11}"}, "title": "Remove `k_effort` from `atlas_msgs` to match `AtlasRobotInterface`"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2014-09-16T15:59:00.823995+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 12380698}, {"links": {"self": {"href": "data/repositories/osrf/drcsim/issues/343/comments/12403690.json"}, "html": {"href": "#!/osrf/drcsim/issues/343#comment-12403690"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/drcsim/issues/343.json"}}, "type": "issue", "id": 343, "repository": {"links": {"self": {"href": "data/repositories/osrf/drcsim.json"}, "html": {"href": "#!/osrf/drcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{247b5408-ae91-4e3c-b2f9-a21994658d11}ts=c_plus_plus"}}, "type": "repository", "name": "drcsim", "full_name": "osrf/drcsim", "uuid": "{247b5408-ae91-4e3c-b2f9-a21994658d11}"}, "title": "Remove `k_effort` from `atlas_msgs` to match `AtlasRobotInterface`"}, "content": {"raw": "not clear what to do here yet.", "markup": "markdown", "html": "<p>not clear what to do here yet.</p>", "type": "rendered"}, "created_on": "2014-09-17T15:37:39.046703+00:00", "user": {"display_name": "John Hsu", "uuid": "{0a186eae-abf0-4514-a951-23db5eccc286}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D"}, "html": {"href": "https://bitbucket.org/%7B0a186eae-abf0-4514-a951-23db5eccc286%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:f3968cd3-4910-4384-8349-482a6c7889ec/5445ce6e-6273-47f0-84eb-621c86ca11cb/128"}}, "nickname": "hsu", "type": "user", "account_id": "557058:f3968cd3-4910-4384-8349-482a6c7889ec"}, "updated_on": null, "type": "issue_comment", "id": 12403690}], "page": 1, "size": 5}