{"links": {"self": {"href": "data/repositories/osrf/drcsim/issues/127/comments/3135772.json"}, "html": {"href": "#!/osrf/drcsim/issues/127#comment-3135772"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/drcsim/issues/127.json"}}, "type": "issue", "id": 127, "repository": {"links": {"self": {"href": "data/repositories/osrf/drcsim.json"}, "html": {"href": "#!/osrf/drcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{247b5408-ae91-4e3c-b2f9-a21994658d11}ts=c_plus_plus"}}, "type": "repository", "name": "drcsim", "full_name": "osrf/drcsim", "uuid": "{247b5408-ae91-4e3c-b2f9-a21994658d11}"}, "title": "Bad joint_states when in Nominal mode"}, "content": {"raw": "At this point, I'd definitely classify this difference in between \"pinned\" and \"nominal\" as a bug.  At the risk of repeating myself from above, the issue is that in Nominal mode there is a subset of joints that have a steady-state offset (neck_ay is the easiest and most obvious to examine for debugging purposes) and need a non-zero integral gain (jacking up the P only reduces the offset by multiples, but doesn't remove it completely).  But, it's impossible to tune a joint because in Nominal mode, without properly tuned joints, the robot falls over after even simple motions (like just lowering or raising the neck joint).  In pinned mode, you can isolate and move individual joints with ease in order to tune the PD parts of a controller, but without the steady state offset, you can't tune the I gain, and of course without I gain, it's impossible to prperly stay balanced while tuning in Nominal mode.  So we have a bit of a cyclical problem that (in my opinion) can most easily be handled by having a \"pinned\" mode that acts the same way as nominal mode for all joints, but just with the \"hovering\" so that is it easy to tun individual joints without having to restart Gazebo because the robot falls over and contacts the ground.", "markup": "markdown", "html": "<p>At this point, I'd definitely classify this difference in between \"pinned\" and \"nominal\" as a bug.  At the risk of repeating myself from above, the issue is that in Nominal mode there is a subset of joints that have a steady-state offset (neck_ay is the easiest and most obvious to examine for debugging purposes) and need a non-zero integral gain (jacking up the P only reduces the offset by multiples, but doesn't remove it completely).  But, it's impossible to tune a joint because in Nominal mode, without properly tuned joints, the robot falls over after even simple motions (like just lowering or raising the neck joint).  In pinned mode, you can isolate and move individual joints with ease in order to tune the PD parts of a controller, but without the steady state offset, you can't tune the I gain, and of course without I gain, it's impossible to prperly stay balanced while tuning in Nominal mode.  So we have a bit of a cyclical problem that (in my opinion) can most easily be handled by having a \"pinned\" mode that acts the same way as nominal mode for all joints, but just with the \"hovering\" so that is it easy to tun individual joints without having to restart Gazebo because the robot falls over and contacts the ground.</p>", "type": "rendered"}, "created_on": "2013-02-14T15:35:43.378168+00:00", "user": {"display_name": "Patrick Beeson", "uuid": "{d33f061a-d3c9-4b15-96cc-d08b463d97c6}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd33f061a-d3c9-4b15-96cc-d08b463d97c6%7D"}, "html": {"href": "https://bitbucket.org/%7Bd33f061a-d3c9-4b15-96cc-d08b463d97c6%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/initials/PB-0.png"}}, "nickname": "Patrick Beeson", "type": "user", "account_id": "557058:eff3a3b0-e19b-43e6-b0a0-22d6a8721c3b"}, "updated_on": null, "type": "issue_comment", "id": 3135772}